# Service Architecture

> This document defines the roles and functions of each package, focusing on package-level organization.

- `noumenon-front`
  - Role: Web Service
  - Features:
    - Provides item search functionality
    - Provides detailed item information
  - Characteristics:
    - Built with Nest.js
    - Uses item data schema provided by the `noumenon-data-schema` package
    - Uses item data from files in cloud storage managed by `noumenon-data-sync`
- `noumenon-librarian`
  - Role: Data Pipeline Orchestration
  - Features:
    - Detects raw-data changes
    - Downloads raw data and runs noumenon-gleaner to generate schema and data files.
    - Places generated files in appropriate locations
    - Manages schema package versioning and deployment
    - Synchronizes data files with cloud storage
- `noumenon-data-schema`
  - Role: Data Schema Provider Package
  - Characteristics:
    - Contains files generated by librarian
- `noumenon-data-sync`
  - Role: Data Distribution and CDN Management
  - Features:
    - Uploads/synchronizes data files to cloud storage
    - Manages CDN cache invalidation
    - File compression and optimization (Optional)
- `noumenon-gleaner`
  - Role: Data Extraction Tool
  - Features:
    - Reads raw data files (CSV format) and generates service-required data files (JSON format) and schema files (TypeScript format)
  - Characteristics:
    - Provides functionality through CLI commands
    - Takes input file path as CLI command parameter
    - Takes output file path as CLI command parameter
    - Allows selection of schema file generation or data file generation via CLI command parameter
    - Implemented in Rust and provided as NPM package (using [napi-rs](https://napi.rs/))
- `noumenon-raw-data`
  - Role: Raw-data Source
  - Characteristics:
    - Due to environmental constraints, automation of raw-data updates is difficult and inefficient, so it's managed manually
